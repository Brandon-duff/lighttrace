import React, { useState, useRef, useEffect } from 'react';
import styles from './Slider.module.css';
import { Replayer } from 'rrweb';

export const Slider = ({
    max,
    current,
    onSelect,
}: {
    max: number;
    current: number;
    onSelect: (newTime: number) => void;
}) => {
    const sliderRef = useRef<HTMLDivElement>(null);
    const timePercentage = (current / max) * 100;
    return (
        <div
            className={styles.sliderWrapper}
            onClick={(e: React.MouseEvent<HTMLDivElement>) => {
                const ratio =
                    e.clientX /
                    (sliderRef?.current?.getBoundingClientRect().width ??
                        1);
                console.log(ratio);
                onSelect(ratio * max);
            }}
        >
            <div 
            ref={sliderRef}
            className={styles.sliderRail} />
            {
                <div
                    className={styles.indicator}
                    style={{
                        marginLeft: timePercentage.toString() + '%',
                    }}
                />
            }
        </div>
    );
};
